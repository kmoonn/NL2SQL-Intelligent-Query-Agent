# 检索增强生成

**RAG**（Retrieval Augmented Generation）

**RAG = 知识库 + 检索技术 + LLM 提示**

通过将**大语言模型**链接到**外部资源**使生成式 AI 应用**输出更准确的回答**。

将外部资源**切分**成较小的**片段**，再在**向量数据库**中为其**添加索引**，然后将其用作参考资料以提供更准确的回答。

## 特点

- **数据主权和隐私**

大语言模型是通过**公开可用的数据**进行训练，其中可能不包括某些特定信息，例如**企业内部保密数据、个人隐私数据**等，导致大语言模型不能生成我们想要的特定内容。

- **知识实时性**

大语言模型具有**知识截止日期**，意味着模型的训练数据只包含在特定日期之前的数据和内容，RAG 架构可以链接**实时更新**的数据。

- **回答准确性**

RAG 可以降低大语言模型 **“幻觉”**，同时用户可以对模型输出内容加以验证，并在问题超出其知识范围时将 “我不知道” 作为回答。

- **成本效益**

**微调**或者**重新训练**大模型**既昂贵又耗时**，借助 RAG 可以将新数据引入大语言模型，还可以通过上传文档或文件来替换或更新信息源。

## 原理

RAG 架构的工作原理是从外部来源检索数据，将其处理到大语言模型的语境（**上下文**）中，然后基于**组合来源**生成回答。该过程包括**三个主要阶段**：**数据准备、检索和生成**。

### 1. 数据准备

- 提取
- 文本分割
- 向量化（**embedding**）
- 索引

构建索引，写入数据库。

### 2. 检索

- 数据检索

常见的检索方法：相似性检索、全文检索。

- 注入 Prompt

任务描述、背景知识（检索获得）、任务指令（用户提问）。

### 3. 生成

输出回答

## 应用

- 智能客服
